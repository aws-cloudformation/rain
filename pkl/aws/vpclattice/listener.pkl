/// AWS::VpcLattice::Listener
///
/// Generated by rain build --pkl-class AWS::VpcLattice::Listener
module aws.vpclattice.listener

import "../../cloudformation.pkl"

/// 
open class ListenerDefaultAction {
    FixedResponse: (ListenerFixedResponse)?
    Forward: (ListenerForward)?
}

/// 
open class ListenerFixedResponse {
    StatusCode: Int|Mapping
}

/// 
open class ListenerForward {
    TargetGroups: Listing<ListenerWeightedTargetGroup>
}

/// 
open class ListenerTag {
    Key: String|Mapping
    Value: String|Mapping
}

/// 
open class ListenerWeightedTargetGroup {
    TargetGroupIdentifier: String(matches(Regex(#"^((tg-[0-9a-z]{17})|(arn:[a-z0-9\-]+:vpc-lattice:[a-zA-Z0-9\-]+:\d{12}:targetgroup/tg-[0-9a-z]{17}))$"#)))|Mapping
    Weight: (Int|Mapping)?
}

/// Creates a listener for a service. Before you start using your Amazon VPC Lattice service, you must add one or more listeners. A listener is a process that checks for connection requests to your services.
open class Listener extends cloudformation.Resource {

    Type = "AWS::VpcLattice::Listener"


    /// 
    hidden DefaultAction: ListenerDefaultAction

    /// 
    hidden Name: (String(matches(Regex(#"^(?!listener-)(?![-])(?!.*[-]$)(?!.*[-]{2})[a-z0-9-]+$"#)))|Mapping)?

    /// 
    hidden Port: (Int|Mapping)?

    /// 
    hidden Protocol: ListenerProtocol|Mapping

    /// 
    hidden ServiceIdentifier: (String(matches(Regex(#"^((svc-[0-9a-z]{17})|(arn:[a-z0-9\-]+:vpc-lattice:[a-zA-Z0-9\-]+:\d{12}:service/svc-[0-9a-z]{17}))$"#)))|Mapping)?

    /// 
    hidden Tags: (Listing<ListenerTag>)?

    Properties {
        ["DefaultAction"] = if (DefaultAction == null) null else DefaultAction
        ["Name"] = if (Name == null) null else Name
        ["Port"] = if (Port == null) null else Port
        ["Protocol"] = if (Protocol == null) null else Protocol
        ["ServiceIdentifier"] = if (ServiceIdentifier == null) null else ServiceIdentifier
        ["Tags"] = if (Tags == null) null else Tags
    }

}


typealias ListenerProtocol = "HTTP"|"HTTPS"
